{% extends "layout.html" %}

{% block title %}Paciente - Planos{% endblock %}

{% block body %}

<nav class="navbar navbar-light bg-light">
  <ul class="navbar-nav mr-auto">
    <li class="nav-item active">
      Paciente: <b>{{patient.name}}</b>
    </li>
  </ul>

  <a href="{{ url_for('patient.create_plan', id=patient['id']) }}" title="Novo">
    <button class="btn btn btn-info my-2 my-sm-0">
      Novo Plano
      <svg class="bi bi-file-plus" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 1H4a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V8h-1v5a1 1 0 01-1 1H4a1 1 0 01-1-1V3a1 1 0 011-1h5V1z"/>
        <path fill-rule="evenodd" d="M13.5 1a.5.5 0 01.5.5v2a.5.5 0 01-.5.5h-2a.5.5 0 010-1H13V1.5a.5.5 0 01.5-.5z" clip-rule="evenodd"/>
        <path fill-rule="evenodd" d="M13 3.5a.5.5 0 01.5-.5h2a.5.5 0 010 1H14v1.5a.5.5 0 01-1 0v-2z" clip-rule="evenodd"/>
      </svg>
    </button>
  </a>
</nav>

<table class="table table-striped">
  <thead>
    <tr>
      <th style="width: 5%">#</th>
      <th style="width: 45%">Plano Ativo</th>
      <th style="width: 22%"></th>
      <th style="width: 20%"></th>
      <th style="width: 8%"></th>
    </tr>
  </thead>

  <tbody>
    {% if not activePlans %}
    <tr>
      <th scope="row"></th>
      <td>Paciente sem plano ativo!</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    {% endif %}

    {% for p in activePlans %}
    <tr class="table-info">
      <td>{{ p.id }}</td>
      <td>{{ p.plan_type }}</td>
      <td>
        <a href="{{ url_for('plan.update', id=p['id']) }}" title="{{ p.name }}">
          <button class="btn btn btn-info">Editar
            <svg class="bi bi-pen" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M5.707 13.707a1 1 0 01-.39.242l-3 1a1 1 0 01-1.266-1.265l1-3a1 1 0 01.242-.391L10.086 2.5a2 2 0 012.828 0l.586.586a2 2 0 010 2.828l-7.793 7.793zM3 11l7.793-7.793a1 1 0 011.414 0l.586.586a1 1 0 010 1.414L5 13l-3 1 1-3z"
                clip-rule="evenodd" />
              <path fill-rule="evenodd"
                d="M9.854 2.56a.5.5 0 00-.708 0L5.854 5.855a.5.5 0 01-.708-.708L8.44 1.854a1.5 1.5 0 012.122 0l.293.292a.5.5 0 01-.707.708l-.293-.293z"
                clip-rule="evenodd" />
              <path d="M13.293 1.207a1 1 0 011.414 0l.03.03a1 1 0 01.03 1.383L13.5 4 12 2.5l1.293-1.293z" />
            </svg>
          </button>
        </a>
        <a href="{{ url_for('plan.display', id=p['id']) }}" title="{{ p.name }}">
          <button class="btn btn btn-info">Visualizar
            <svg class="bi bi-file-earmark-text" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M4 1h5v1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1V6h1v7a2 2 0 01-2 2H4a2 2 0 01-2-2V3a2 2 0 012-2z" />
              <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 019 4.5z" />
              <path fill-rule="evenodd"
                d="M5 11.5a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h5a.5.5 0 010 1h-5a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h5a.5.5 0 010 1h-5a.5.5 0 01-.5-.5z"
                clip-rule="evenodd" />
            </svg>
          </button>          
        </a>
      </td>
      <td>
        <a href="{{ url_for('plan.visit', id=p['id']) }}" title="{{ p.name }}">
          <button class="btn btn btn-info">Registrar Consulta
            <svg class="bi bi-file-check" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 1H4a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V8h-1v5a1 1 0 01-1 1H4a1 1 0 01-1-1V3a1 1 0 011-1h5V1z"/>
              <path fill-rule="evenodd" d="M15.854 2.146a.5.5 0 010 .708l-3 3a.5.5 0 01-.708 0l-1.5-1.5a.5.5 0 01.708-.708L12.5 4.793l2.646-2.647a.5.5 0 01.708 0z" clip-rule="evenodd"/>
            </svg>          
        </button>
        </a>
      </td>
      <td>
        <form action="{{ url_for('plan.delete', id=p['id']) }}" method="get">
          <button class="btn btn btn-info" type="submit" value="Delete"
            onclick="return confirm('Deseja excluir o plano - {{ p.plan_type }} ?');">
            <svg class="bi bi-trash-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M2.5 1a1 1 0 00-1 1v1a1 1 0 001 1H3v9a2 2 0 002 2h6a2 2 0 002-2V4h.5a1 1 0 001-1V2a1 1 0 00-1-1H10a1 1 0 00-1-1H7a1 1 0 00-1 1H2.5zm3 4a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7a.5.5 0 01.5-.5zM8 5a.5.5 0 01.5.5v7a.5.5 0 01-1 0v-7A.5.5 0 018 5zm3 .5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z"
                clip-rule="evenodd" />
            </svg>
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if oldPlans %}
<table class="table table-striped">
  <thead>
    <tr>
      <th style="width: 5%">#</th>
      <th style="width: 45%">Hist√≥rico de Planos</th>
      <th style="width: 22%"></th>
      <th style="width: 20%"></th>
      <th style="width: 8%"></th>
    </tr>
  </thead>

  <tbody>
    {% for p in oldPlans %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.plan_type }}</td>
      <td>        
        <a href="{{ url_for('plan.update', id=p['id']) }}" title="{{ p.name }}">
          <button class="btn btn btn-info">
            Editar
            <svg class="bi bi-pen" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M5.707 13.707a1 1 0 01-.39.242l-3 1a1 1 0 01-1.266-1.265l1-3a1 1 0 01.242-.391L10.086 2.5a2 2 0 012.828 0l.586.586a2 2 0 010 2.828l-7.793 7.793zM3 11l7.793-7.793a1 1 0 011.414 0l.586.586a1 1 0 010 1.414L5 13l-3 1 1-3z"
                clip-rule="evenodd" />
              <path fill-rule="evenodd"
                d="M9.854 2.56a.5.5 0 00-.708 0L5.854 5.855a.5.5 0 01-.708-.708L8.44 1.854a1.5 1.5 0 012.122 0l.293.292a.5.5 0 01-.707.708l-.293-.293z"
                clip-rule="evenodd" />
              <path d="M13.293 1.207a1 1 0 011.414 0l.03.03a1 1 0 01.03 1.383L13.5 4 12 2.5l1.293-1.293z" />
            </svg>
          </button>
        </a>
        <a href="{{ url_for('plan.display', id=p['id']) }}" title="{{ p.name }}">
          <button class="btn btn btn-info">Visualizar
            <svg class="bi bi-file-earmark-text" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M4 1h5v1H4a1 1 0 00-1 1v10a1 1 0 001 1h8a1 1 0 001-1V6h1v7a2 2 0 01-2 2H4a2 2 0 01-2-2V3a2 2 0 012-2z" />
              <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 019 4.5z" />
              <path fill-rule="evenodd"
                d="M5 11.5a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h5a.5.5 0 010 1h-5a.5.5 0 01-.5-.5zm0-2a.5.5 0 01.5-.5h5a.5.5 0 010 1h-5a.5.5 0 01-.5-.5z"
                clip-rule="evenodd" />
            </svg>
          </button>
        </a>
      </td>
      <td> </td>
      <td> </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}